(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var n;e.g.importScripts&&(n=e.g.location+"");var t=e.g.document;if(!n&&t&&(t.currentScript&&(n=t.currentScript.src),!n)){var l=t.getElementsByTagName("script");l.length&&(n=l[l.length-1].src)}if(!n)throw new Error("Automatic publicPath is not supported in this browser");n=n.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=n})();const n=e.p+"fe174980d7c8df569cb7.gif",t=e.p+"b93b42446dc1c76f825d.png",l=e=>{let n;Array.from(e.children).some((e=>{if(0===e.innerHTML.length)return n=e,e}));const t=document.createElement("div");t.classList.add("empty"),e.insertBefore(t,n)},i=e=>{let n=0;Array.from(e.children).forEach((e=>{e.id=n,n++}))},r=e=>{const n="cube"===Array.from(e.classList.entries())[1][1]?Array.from(e.classList.entries())[0][1]:Array.from(e.classList.entries())[1][1];e.classList.remove(n),e.classList.add(`num${e.innerHTML}`)},s=e=>{const n=document.querySelector(".count_online"),t=document.querySelector(".local_count");n.innerHTML=+n.innerHTML+ +e,+n.innerHTML>=+t.innerHTML&&((e,n,t)=>{if(localStorage.getItem("sum")){let l=localStorage.getItem("sum");const i=JSON.parse(l)+e;localStorage.setItem("sum",JSON.stringify(i)),t.innerHTML=n.innerHTML}else localStorage.setItem("sum",e)})(e,n,t)},d=async(e=null,n,t)=>new Promise(((d,c)=>{if(e){e.classList.add("top"),t.classList.add("bot"),n.classList.add("fixed"),n.style.zIndex="5";const c=+t.innerHTML+ +n.innerHTML+ +e.innerHTML;n.innerHTML=c,s(c),setTimeout((()=>{n.classList.remove("fixed"),n.style.zIndex="1",e.remove(),t.remove(),r(n),l(n.parentElement),i(n.parentElement)}),300),d()}else{t.classList.add("bot"),n.style.zIndex="5";const e=+t.innerHTML+ +n.innerHTML;n.innerHTML=e,s(e),setTimeout((()=>{n.style.zIndex="1",t.remove(),r(n),l(n.parentElement),i(n.parentElement)}),300),d()}})),c=async(e=null,n=null,t=null,d=null,c=null,a=null,o=null,m=null,u)=>{const p=Number(c.innerHTML),v=n?Number(n.innerHTML):0,L=d?Number(d.innerHTML):0,T=e?Number(e.innerHTML):0,y=t?Number(t.innerHTML):0;return new Promise(((l,i)=>{setTimeout((()=>{e&&e.classList.add("right"),n&&n.classList.add("top"),d&&d.classList.add("left"),t&&t.classList.add("fixed"),u&&c.classList.add("fixed"),l({bottomel:t||null,right:e||null,top:n||null,left:d||null,fixed:c||null})}),0)})).then((({bottomel:e,right:n,top:t,left:l,fixed:i})=>new Promise(((r,d)=>{setTimeout((()=>{const d=p+v+L+T+y;i.innerHTML=d,s(d),r({bottomel:e||null,right:n||null,top:t||null,left:l||null,fixed:i||null})}),600)})))).then((({bottomel:e,right:n,top:t,left:s,fixed:d})=>new Promise(((c,u)=>{setTimeout((()=>{n?.remove(),t?.remove(),e?.remove(),s?.remove(),d?.classList.remove("fixed"),a&&l(a),o&&l(o),m&&l(m),a&&i(a),o&&i(o),m&&i(m),d&&r(d),c()}),0)}))))},a=({el1:e,el2:n=null,nextElement:t=null,el3:l=null,prevEl:i=null,parent1:r,parent2:s,parent3:d=null})=>i?.innerHTML==n.innerHTML&&i&&n&&l&&!t?c(e,i,null,l,n,r,s,d,!0):n&&l&&e&&!t?c(e,null,null,l,n,r,s,d,!1):n&&l&&e&&t&&i?c(e,i,t,l,n,r,s,d,!0):n&&l&&e&&t&&!i?c(e,null,t,l,n,r,s,d,!1):n&&!l&&e&&t&&i&&t.innerHTML===e.nextElementSibling.innerHTML?c(null,i,t,n,e,r,s,d,!0):n&&!l&&e&&t&&i&&t.innerHTML!==e.nextElementSibling.innerHTML?c(e,i,t,null,n,r,s,d,!0):void 0,o=async(e=null,n=null,t=null,d=null,c=null,a=null,o=null)=>{const m=e?Number(e.innerHTML):0,u=t?Number(t.innerHTML):0,p=n?Number(n.innerHTML):0,v=d?Number(d.innerHTML):0;return new Promise(((l,i)=>{setTimeout((()=>{d&&d.classList.add("fixed"),t&&t.classList.add("left"),n&&n.classList.add("right"),l({head:e,left:t,fixed:d})}),0)})).then((({head:e,left:n,fixed:t})=>new Promise(((l,i)=>{setTimeout((()=>{const i=m+u+p+v;e.innerHTML=i,s(i),l({head:e,left:n,fixed:t})}),600)})))).then((({head:e,left:t,fixed:s})=>new Promise(((d,o)=>{setTimeout((()=>{e.style.zIndex=1,t?.remove(),n?.remove(),s?.remove(),r(e),l(c),l(a),i(c),i(a),d()}),0)}))))},m=({el1:e,el2:n,prevEl:t=null,parent1:l,parent2:i,next:r=null})=>{if(t){if(t.innerHTML!==n.previousElementSibling.innerHTML&&!r)return c(null,t,null,n,e,l,i,null,!0);if(t.innerHTML===n.previousElementSibling.innerHTML&&!r)return c(e,t,null,null,n,l,i,null,!0)}else{if(!t&&!r)return c(e,null,null,null,n,l,null,null,!1);if(r)return r.parentElement===e.parentElement?o(e,null,n,r,l,i,null):o(n,e,null,r,l,i,null)}},u=(e,n)=>{const t=[...Array.from(document.querySelectorAll(".blocks_container"))].filter((t=>+t.id==+n[e].parentElement.id+1));let l=null;return Array.from(t[0].children).forEach((t=>{t.id===n[e].id&&(l=t)})),l};let p;let v,L,T=0;const y=(e=null)=>{L=document.querySelectorAll(".blocks_container");const n=e||L;for(v=[[],[],[],[],[],[],[],[]];v.length>T;T++)n.forEach((e=>{e.querySelectorAll(".cube, .empty").forEach((e=>{+e.id===T&&v[T].push(e),"empty"===+e.className&&v[T].push(e)}))}));return T=0,new Promise(((e,n)=>{setTimeout((()=>{(async()=>{p=0;const e=new Promise(((e,n)=>{setTimeout((()=>{v.map((n=>{const t=n.filter(((e,t)=>{if(e.innerHTML===n[t+1]?.innerHTML&&"empty"!==e.className)return e}));if(0===t.length&&p++,t.length){if(2===t.length){const n=u(1,t);M();const l=t[1].nextElementSibling?.innerHTML===t[1]?.innerHTML?t[1]?.nextElementSibling:null,i=t[1].previousElementSibling?.innerHTML===t[1]?.innerHTML?t[1]?.previousElementSibling:null;l&&i&&t[1]&&t[0]&&n?a({el1:t[0],el2:t[1],nextElement:l,el3:n,prevEl:t[1].previousElementSibling,parent1:t[0].parentElement,parent2:t[1].parentElement,parent3:n.parentElement}).then((()=>{y().then((()=>{e()}))})):l&&i?a({el1:t[0],el2:t[1],nextElement:null,el3:n,prevEl:t[1].previousElementSibling,parent1:t[0].parentElement,parent2:t[1].parentElement,parent3:n.parentElement}).then((()=>{y().then((()=>{e()}))})):l&&!i?a({el1:t[0],el2:t[1],nextElement:l,el3:n,prevEl:null,parent1:t[0].parentElement,parent2:t[1].parentElement,parent3:n.parentElement}).then((()=>{y().then((()=>{e()}))})):l||i?!l&&i&&a({el1:t[0],el2:t[1],nextElement:null,el3:n,prevEl:i,parent1:t[0].parentElement,parent2:t[1].parentElement,parent3:n.parentElement}).then((()=>{y().then((()=>{e()}))})):a({el1:t[0],el2:t[1],nextElement:null,el3:n,prevEl:null,parent1:t[0].parentElement,parent2:t[1].parentElement,parent3:n.parentElement}).then((()=>{y().then((()=>{e()}))}))}else if(1===t.length){M();const n=u(0,t),l=t[0].nextElementSibling?.innerHTML===t[0].innerHTML?t[0].nextElementSibling:n.nextElementSibling?.innerHTML===n.innerHTML?n.nextElementSibling:null;t[0].previousElementSibling?.innerHTML!==t[0]?.innerHTML||l?n?.previousElementSibling?.innerHTML!==n?.innerHTML||l?t[0].previousElementSibling?.innerHTML===t[0]?.innerHTML||n.previousElementSibling?.innerHTML===n?.innerHTML||l?t[0].innerHTML===l?.innerHTML&&t[0].previousElementSibling?.innerHTML!==t[0].innerHTML&&t[0].previousElementSibling?.innerHTML!==l?.innerHTML?(t[0].innerHTML!==n.nextElementSibling.innerHTML||t[0].innerHTML===n.nextElementSibling.innerHTML)&&m({el1:t[0],el2:n,next:l,parent1:t[0].parentElement,parent2:n.parentElement}).then((()=>{y().then((()=>{e()}))})):t[0].nextElementSibling.innerHTML===t[0].innerHTML&&t[0].previousElementSibling.innerHTML===t[0].innerHTML?a({el1:t[0],el2:n,nextElement:l,el3:null,prevEl:t[0].previousElementSibling,parent1:t[0].parentElement,parent2:n.parentElement,parent3:null}).then((()=>{y().then((()=>{e()}))})):n.nextElementSibling.innerHTML===n.innerHTML&&n.previousElementSibling.innerHTML===n.innerHTML&&a({el1:t[0],el2:n,nextElement:n.nextElementSibling,el3:null,prevEl:n.previousElementSibling,parent1:t[0].parentElement,parent2:n.parentElement,parent3:null}).then((()=>{y().then((()=>{e()}))})):m({el1:t[0],el2:n,prevEl:null,parent1:t[0].parentElement,parent2:n.parentElement}).then((()=>{y().then((()=>{e()}))})):m({el1:t[0],el2:n,prevEl:n.previousElementSibling,parent1:t[0].parentElement,parent2:n.parentElement}).then((()=>{y().then((()=>{e()}))})):m({el1:t[0],el2:n,prevEl:t[0].previousElementSibling,parent1:t[0].parentElement,parent2:n.parentElement}).then((()=>{y().then((()=>{e()}))}))}}else e()}))}),0)}));e.then((()=>{8===p&&document.querySelectorAll(".blocks_container").forEach((e=>{const n=e.querySelectorAll(".cube");n.forEach(((e,t)=>{const l=e.previousElementSibling?e.previousElementSibling:null;l?.innerHTML===e.innerHTML&&e.innerHTML==(n[t+1]?n[t+1].innerHTML:0)?d(l,e,n[t+1]).then((()=>{M(),setTimeout((()=>{y()}))})):0!==n[t+1]?.nextElementSibling?.innerHTML.length&&n[t+1]?.nextElementSibling?.innerHTML===n[t+1]?.innerHTML||l?.innerHTML===e.innerHTML||e.innerHTML!=(n[t+1]?n[t+1].innerHTML:0)||d(null,e,n[t+1]).then((()=>{M(),setTimeout((()=>{y()}),300)}))}))}))}))})(),e()}),300)}))},b=()=>{const e=document.querySelector(".newCube"),n=[{name:"num5",inner:5},{name:"num10",inner:10},{name:"num20",inner:20},{name:"num40",inner:40},{name:"num80",inner:80},{name:"num160",inner:160}];setTimeout((()=>{const t=n[Math.floor(Math.random()*n.length)];document.querySelector(".newCube .gifka")&&(e.innerHTML=`<div id="0" class="cube ${t.name}">${t.inner}</div>`)}),0)};let E=2;const M=()=>{E=2};setInterval((()=>{0!==E?E--:0==E&&b()}),600);const H=document.querySelector(".wrapper");document.querySelector(".icon").href=t;const g=()=>{H.innerHTML=`\n      <div class="count">\n        <div class="count_online">0</div>&nbsp;|&nbsp;\n        <div class="local_count"></div>\n      </div>\n      <div class="end">\n        <h2>the end</h2>\n        <div><span class="record">рекорд&nbsp;</span><span class="record_num"></span></div>\n        <div><span class="your_record">ваш рекорд&nbsp;</span><span class="your_record_num"></span></div>\n        <button>новая игра</button>\n      </div>\n      <div class="general_block">\n        <div id="0" class="blocks_container">\n          <div id="0" class="cube num5">5</div>\n          <div id="1" class="empty"></div>\n          <div id="2" class="empty"></div>\n          <div id="3" class="empty"></div>\n          <div id="4" class="empty"></div>\n          <div id="5" class="empty"></div>\n          <div id="6" class="empty"></div>\n          <div id="7" class="empty"></div>\n        </div>\n        <div id="1" class="blocks_container">\n          <div id="0" class="cube num10">10</div>\n          <div id="1" class="empty"></div>\n          <div id="2" class="empty"></div>\n          <div id="3" class="empty"></div>\n          <div id="4" class="empty"></div>\n          <div id="5" class="empty"></div>\n          <div id="6" class="empty"></div>\n          <div id="7" class="empty"></div>\n        </div>\n        <div id="2" class="blocks_container">\n          <div id="0" class="cube num20">20</div>\n          <div id="1" class="empty"></div>\n          <div id="2" class="empty"></div>\n          <div id="3" class="empty"></div>\n          <div id="4" class="empty"></div>\n          <div id="5" class="empty"></div>\n          <div id="6" class="empty"></div>\n          <div id="7" class="empty"></div>\n        </div>\n        <div id="3" class="blocks_container">\n          <div id="0" class="cube num40">40</div>\n          <div id="1" class="empty"></div>\n          <div id="2" class="empty"></div>\n          <div id="3" class="empty"></div>\n          <div id="4" class="empty"></div>\n          <div id="5" class="empty"></div>\n          <div id="6" class="empty"></div>\n          <div id="7" class="empty"></div>\n        </div>\n        <div id="4" class="blocks_container">\n          <div id="0" class="cube num80">80</div>\n          <div id="1" class="empty"></div>\n          <div id="2" class="empty"></div>\n          <div id="3" class="empty"></div>\n          <div id="4" class="empty"></div>\n          <div id="5" class="empty"></div>\n          <div id="6" class="empty"></div>\n          <div id="7" class="empty"></div>\n        </div>\n        <div id="5" class="blocks_container">\n          <div id="0" class="cube num160">160</div>\n          <div id="1" class="empty"></div>\n          <div id="2" class="empty"></div>\n          <div id="3" class="empty"></div>\n          <div id="4" class="empty"></div>\n          <div id="5" class="empty"></div>\n          <div id="6" class="empty"></div>\n          <div id="7" class="empty"></div>\n        </div>\n      </div>\n      <div class="newCubeBlock">\n        <div class='newCube'>\n          <img class="gifka" src=${n} alt="errorImg"/>\n        </div>\n      </div>\n   `},f=()=>{const e=document.querySelector(".count_online"),t=document.querySelector(".record_num"),l=document.querySelector(".your_record_num"),i=document.querySelector(".local_count");localStorage.getItem("sum")?(i.innerHTML=localStorage.getItem("sum"),t.innerHTML=localStorage.getItem("sum"),l.innerHTML=e.innerHTML):(t.innerHTML=0,i.innerHTML=0),y(document.querySelectorAll(".blocks_container")),b(),(()=>{const e=document.querySelector(".general_block"),t=document.querySelector(".newCube");e.addEventListener("click",(e=>{if(t.querySelector(".cube")&&e.target.closest(".blocks_container")){const l=e.target.closest(".blocks_container"),i=document.querySelector(".newCube .cube");i.classList.add("AddingCube");const r=Array.from(l.children).find((e=>"empty"===e.className));if(M(),r){const e=r.id;r.remove();const s=Array.from(l.children).find((e=>"empty"===e.className));i.id=e,l.insertBefore(i,s),i.id=e,t.innerHTML=`<img class="gifka" src=${n} alt="errorImg"/>`,new Promise(((e,n)=>{setTimeout((()=>{i.classList.add("AddingCube2"),e()}),0)})).then((()=>new Promise(((e,n)=>{setTimeout((()=>{i.classList.remove("AddingCube2"),i.classList.remove("AddingCube"),e()}),600)})))).then((()=>{y()}))}else{E=-1,t.innerHTML=`<img class="gifka" src=${n} alt="errorImg"/>`;const e=document.querySelector(".end"),l=document.querySelector(".count_online"),i=document.querySelector(".general_block");document.querySelector(".your_record_num").innerHTML=l.innerHTML,i.style.display="none",e.style.display="flex"}}}))})(),document.querySelector("button").onclick=()=>{M();const e=document.querySelector(".end"),n=document.querySelector(".general_block");e.style.display="none",n.style.display="flex",g(),f()}};g(),f()})();